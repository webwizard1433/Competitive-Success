
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Welcome | Competitive Success</title>
    <link rel="icon" href="/success.png" type="image/png">
    <script>
        // --- Safe Storage Utility ---
        const safeStorage = (() => {
            try {
                const storage = window.localStorage;
                storage.setItem('__test__', '1');
                storage.removeItem('__test__');
                return storage;
            } catch (e) {
                console.warn("localStorage is not available. Using in-memory fallback.");
                const memoryStore = {};
                return {
                    setItem: (key, value) => { memoryStore[key] = value; },
                    getItem: (key) => memoryStore[key] || null,
                    removeItem: (key) => { delete memoryStore[key]; }
                };
            }
        })();

    </script>
    <style>
        :root {
            --primary-color: #FFC107; 
            --primary-hover-color: #DAA520; 
            --card-background: rgba(255, 255, 255, 0.05); 
            --card-border-color: rgba(255, 255, 255, 0.2); 
            --text-color: #F5F5DC; 
            --secondary-text-color: #adb5bd; 
            --header-height: 70px;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            /* New creative background */
            background-color: #0a192f; /* Fallback color */
            background-image: 
                radial-gradient(at 80% 20%, hsla(212,40%,50%,0.3) 0px, transparent 50%),
                radial-gradient(at 20% 80%, hsla(280,40%,50%,0.3) 0px, transparent 50%);
            margin: 0;
            color: var(--text-color);
            background-attachment: fixed; /* Prevents gradient from scrolling with content */
        }

        /* --- Header & Navigation --- */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: var(--header-height);
            display: flex;
            align-items: center;
            padding: 0 2rem;
            box-sizing: border-box;
            z-index: 1000;
            background-color: rgba(10, 25, 47, 0.85);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--card-border-color);
        }

        .user-greeting {
            color: var(--secondary-text-color);
            margin-right: 1.5rem;
        }

        .header-logo {
            display: flex;
            align-items: center;
            justify-content: flex-end;
        }

        .header-logo img {
            height: 40px; /* Adjust size as needed */
            width: 40px;
            border-radius: 50%; /* Makes the image circular */
            object-fit: cover; /* Ensures the image fills the circle */
        }

        /* --- New Flip Menu (Left Sidebar) --- */
        .side-menu {
            position: fixed;
            top: 0;
            left: 0;
            width: 250px;
            transform: translateX(-100%); /* Hidden by default */
            height: 100%;
            background-color: var(--card-background);
            backdrop-filter: blur(10px);
            padding: 1.5rem;
            padding-top: calc(var(--header-height) + 1rem); /* Space for header */
            box-sizing: border-box;
            z-index: 1100; /* Above header */
            transition: transform 0.3s ease-in-out;
            /* Flexbox for layout */
            display: flex;
            flex-direction: column;
        }

        .side-menu.open {
            transform: translateX(0);
        }

        body.menu-open .main-container {
            filter: blur(5px) brightness(0.7);
            pointer-events: none; /* Prevent interaction with blurred background */
            user-select: none;
            transition: filter 0.3s ease-in-out;
        }
        .side-menu h2 {
            font-size: 1.5rem;
            color: var(--primary-color);
            margin: 0 0 1.5rem 0;
            text-align: center;
        }
        .side-menu ul { list-style: none; padding: 0; margin: 0; }
        #examList {
            overflow-y: auto; /* Allow this list to scroll if needed */
            flex-grow: 1; /* Allow it to take up available space */
        }
        .side-menu li a {
            display: flex; /* Use flexbox for alignment */
            align-items: center;
            color: var(--text-color);
            text-decoration: none;
            padding: 0.8rem 1rem;
            border-radius: 5px;
            margin-bottom: 0.5rem;
            transition: background-color 0.3s ease;
        }
        .side-menu li a .icon {
            margin-right: 0.8rem; /* Space between icon and text */
            font-size: 1.2rem; /* Adjust icon size */
        }
        .side-menu li a:hover { background-color: rgba(255, 255, 255, 0.2); }
        .side-menu li a.active {
            background-color: var(--primary-color);
            color: #0A2342; /* Dark blue text for contrast on gold background */
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--text-color);
            font-size: 3rem;
            text-align: center;
        }

        .dropdown-content a {
            color: var(--text-color);
            padding: 12px 16px;
            text-decoration: none;
            display: block;
            transition: background-color 0.2s;
        }

        @media (prefers-color-scheme: dark) {
            .dropdown-content a:hover {
                background-color: #333;
            }
        }
        .dropdown-content a:hover {
            background-color: #f1f1f1;
        }

        /* --- Main Content --- */
        .main-container {
            padding: 1rem;
            margin: 0;
            width: 100%;
            box-sizing: border-box; /* Add for predictable sizing */
            display: flex;
            flex-direction: column; /* This will be the main flex container */
            align-items: center;
            justify-content: center;
            margin-top: var(--header-height); /* Use margin to push the whole container down */
        }

        @media (max-width: 600px) {
            .main-container { padding: 1rem; }
        }

        /* --- Exam Thumbnail Section --- */
        .section-header {
            /* Styles moved to the new .header class */
            flex-grow: 1; /* Allow the title to take up space */
        }
        .section-header h2 {
            text-align: center;
            font-size: 1.5rem;
            margin: 0;
        }
        .section-header h2 {
            text-align: center; flex-grow: 1;
            font-size: 1.8rem;
            margin: 0;
        }
        @media (max-width: 600px) {
            .section-header h2 { font-size: 1.4rem; }
        }
        .menu-toggle {
            font-size: 1.8rem;
            cursor: pointer;
            color: var(--text-color);
        }

        /* --- Search Bar --- */
        .search-container {
            padding: 0 2rem 1.5rem;
            max-width: 600px;
            margin: 0 auto;
            width: 100%;
            box-sizing: border-box; /* This is the key fix */
        }
        .search-bar {
            background-color: var(--card-background);
            border: 1px solid var(--card-border-color);
            border-radius: 50px;
            padding: 0.75rem 1.5rem;
            cursor: pointer;
            text-align: left;
            color: var(--secondary-text-color);
            box-sizing: border-box;
        }

        /* --- Search Popup --- */
        .search-popup {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6); /* Slightly darker overlay */
            backdrop-filter: blur(5px);
            z-index: 2000;
            display: flex; /* Always flex, control visibility with opacity */
            flex-direction: column;
            align-items: center; /* Center horizontally */
            padding-top: 2rem;
            box-sizing: border-box;
            /* Animation properties */
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
        }
        @media (max-width: 600px) {
            .search-popup-input { font-size: 1.1rem; }
            .search-popup { padding-top: 1rem; }
        }
        .search-popup.show {
            opacity: 1;
            visibility: visible;
        }
        .search-popup-input {
            background: none;
            border: none;
            border-bottom: 2px solid var(--card-border-color);
            color: var(--text-color);
            font-size: 2rem;
            font-weight: 300;
            flex-grow: 1; /* Take available space */
            padding: 0.5rem 1rem;
            outline: none;
            text-align: center;
            transition: border-color 0.3s ease;
        }
        .search-popup-input:focus {
            border-bottom-color: var(--primary-color);
        }
        @media (max-width: 600px) {
            .search-popup-input { font-size: 1.5rem; }
        }
        .search-results {
            width: 100%;
            margin: 0 auto;
            overflow-y: auto;
            max-height: 60vh; /* Limit the height of results */
            background: var(--card-background);
            border-radius: 8px;
        }
        .search-results a { display: block; padding: 1rem 1.5rem; color: var(--text-color); text-decoration: none; border-bottom: 1px solid var(--card-border-color); }
        /* Remove border from the last result item */
        .search-results a:last-child { border-bottom: none; }
        .search-results a:hover { background-color: rgba(255, 255, 255, 0.1); }
        .search-results a.active {
            background-color: var(--primary-color);
            color: #0A2342;
        }
        .search-input-container {
            display: flex;
            align-items: center;
            position: relative; /* Needed for icon positioning */
            width: 100%;
            margin-bottom: 1.5rem;
        }
        .search-popup-input {
            width: 100%; /* Take full width */
            padding-right: 40px; /* Add space on the right for the icon */
        }
        .voice-search-btn {
            background: none;
            border: none;
            cursor: pointer;
            padding: 0;
        }
        .voice-search-btn {
            position: absolute;
            right: 5px; /* Position inside the input area */
            top: 50%;
            transform: translateY(-50%);
            opacity: 0.8;
            transition: opacity 0.3s ease, transform 0.3s ease;
        }
        .voice-search-btn:hover, .voice-search-btn:focus {
            opacity: 1;
            transform: scale(1.1);
        }
        .voice-search-btn.listening img {
            animation: pulse 1.5s infinite;
        }

        .search-results .no-results {
            padding: 1.5rem 1rem;
            color: var(--secondary-text-color);
            text-align: center;
            font-style: italic;
        }

        .thumbnail-card {
            background-color: var(--card-background);
            border-radius: 10px;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(5px);
            border: 1px solid var(--card-border-color);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            width: 90%;
            max-width: 600px; /* Match the search bar width */
            box-sizing: border-box; /* Add for predictable sizing */
            transition: transform 0.3s ease, box-shadow 0.3s ease, opacity 0.2s ease-in-out;
        }

        .thumbnail-card.updating {
            opacity: 0;
            transform: scale(0.98);
        }

        .thumbnail-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12);
        }

        .thumbnail-card img {
            width: 100%;
            height: 220px; /* Further adjust height to ensure fit */
            object-fit: cover;
        }

        .thumbnail-content {
            padding: 1.5rem;
            text-align: center;
        }

        .thumbnail-content h3 {
            margin: 0 0 0.5rem;
            font-size: 1.5rem;
            color: var(--primary-color);
        }

        .thumbnail-content p {
            margin: 0 0 1.5rem;
            color: var(--secondary-text-color);
            max-width: 60ch; /* Improve readability */
            line-height: 1.6;
            text-align: center;
        }

        .btn {
            display: inline-block;
            padding: 0.75rem 1.5rem;
            background-color: var(--primary-color);
            color: #000000; /* Changed to black */
            text-decoration: none;
            border-radius: 5px;
            font-weight: bold;
            text-align: center;
            transition: background-color 0.3s ease;
        }

        .website-link-box {
            margin-top: 1rem;
            padding: 0.75rem 1rem;
            background-color: rgba(0,0,0,0.2);
            border-radius: 5px;
            text-align: center;
        }
        .website-link-box a {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: bold;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        .btn:hover {
            background-color: var(--primary-hover-color);
        }

        /* --- Back to Top Button --- */
        #backToTopBtn {
            display: none;
            position: fixed;
            bottom: 20px;
            right: 30px;
            z-index: 99;
            border: none;
            outline: none;
            background-color: var(--primary-color);
            color: white;
            cursor: pointer;
            padding: 15px;
            border-radius: 50%;
            font-size: 18px;
            transition: opacity 0.3s, visibility 0.3s;
        }
    </style>
</head>
<body>

    <aside class="side-menu" id="examMenu">
        <h2>Select Exam</h2>
        <ul id="examList">
            <!-- Exam links will be populated by JavaScript -->
        </ul>
        <ul class="user-menu" style="margin-top: auto; padding-top: 1rem; border-top: 1px solid var(--card-border-color);">
            <li><a href="/dashboard.html"><span class="icon">ðŸ“Š</span> My Dashboard</a></li>
            <li><a href="/profile.html"><span class="icon">ðŸ‘¤</span> My Profile</a></li>
            <li><a href="#" onclick="logout()"><span class="icon">ðŸšª</span> Logout</a></li>
        </ul>
    </aside>

    <div class="overlay" id="menuOverlay" onclick="toggleSideMenu()"></div>

    <header class="header">
        <div class="menu-toggle" onclick="toggleSideMenu()">&#9776;</div>
        <div class="section-header">
            <h2>Competitive Success</h2>
        </div>
        <div class="user-greeting">
            <span id="userName"></span>
        </div>
        <div class="header-logo">
            <img src="https://st4.depositphotos.com/1842549/20934/i/450/depositphotos_209344954-stock-photo-success-icon-internet-button-white.jpg" alt="Competitive Success Logo">
        </div>
    </header>

    <main class="main-container" id="mainContainer">
        <section class="content-section" style="display: flex; flex-direction: column; align-items: center; width: 100%;">
            <!-- Search Bar -->
            <div class="search-container">
                <div class="search-bar" onclick="handleSearchClick(event)">
                    &#x1F50D; Search for any exam or subject...
                </div>
            
                <!-- Search bar is now part of the header flow -->
            </div>

            <!-- Main Content Card -->
            <div class="thumbnail-card">
                <img id="examImage" src="https://images.unsplash.com/photo-1523240795612-9a054b0db644?q=80&w=2070" alt="Exam Thumbnail">
                <div class="thumbnail-content">
                    <h3 id="examName">Your Exam</h3>
                    <p id="description-text">Select an exam from the menu to see a brief description here.</p>
                    <a href="#" class="btn" id="startLearningBtn">Start Learning</a>
                    <div id="website-box" style="display: none; width: 100%; box-sizing: border-box;">
                        <div id="website-box" style="display: none;"></div>
                    </div>
            </div>
        </section>
    </main>

    <!-- Search Popup -->
    <div id="searchPopup" class="search-popup">
        <!-- Wrapper for modern layout -->
        <div class="search-content-wrapper" style="width: 90%; max-width: 600px;">
            <div class="search-input-container">
                <input type="text" id="searchInput" class="search-popup-input" placeholder="Type or speak to search...">
                <button class="voice-search-btn" onclick="startVoiceSearch()" title="Voice Search">
                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: white;">
                        <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" y1="19" x2="12" y2="23"></line><line x1="8" y1="23" x2="16" y2="23"></line>
                    </svg>
                </button>
            </div>
            <div id="searchResults" class="search-results"></div>
        </div>
    </div>

    <button onclick="scrollToTop()" id="backToTopBtn" title="Go to top">â†‘</button>

    <script>
        // --- Dynamic Content & Modal Logic ---

        // --- Search Data ---
        const searchableContent = [
            // This will be populated dynamically
        ];

        const examData = {
            upsc: { name: "UPSC", icon: "ðŸ›ï¸", image: "https://static.langimg.com/photo/imgsize-243395,msid-75116780/navbharat-times.jpg", page: "/upsc.html",
                description: "The Civil Service Examination (CSE) is a nationwide competitive examination in India conducted by the Union Public Service Commission (UPSC) for recruitment to various Civil Services, including IAS, IFS, and IPS.", website: "https://upsconline.nic.in" },
            cds: { name: "CDS", icon: "ðŸŽ–ï¸", image: "https://images.hindustantimes.com/rf/image_size_960x540/HT/p2/2017/12/08/Pictures/chetwode-santosh-hindustan-dehradun-india-dehradun-building_8a7bb420-dc2d-11e7-8585-db66518b106f.jpg", page: "/cds.html",
                description: "The Combined Defence Services (CDS) Examination is conducted by the UPSC for recruitment of Commissioned Officers into the Indian Military Academy, Officers Training Academy, Indian Naval Academy, and Indian Air Force Academy.", website: "https://upsc.gov.in/" },
            nda: { name: "NDA", icon: "âœˆï¸", image: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/56/Sudan_Block.jpg/1280px-Sudan_Block.jpg", page: "/nda.html",
                description: "The National Defence Academy (NDA) exam is conducted by the UPSC for admission to the Army, Navy, and Air Force wings of the NDA. It is the gateway for candidates looking to join the Defence Forces as commissioned officers right after the 10+2 level.", website: "https://upsc.gov.in/" },
            'ssc-cgl': { name: "SSC-CGL", icon: "ðŸ’¼", image: "https://blog.numbernagar.com/wp-content/uploads/2019/11/Study.jpg", page: "/ssc-cgl.html",
                description: "The SSC Combined Graduate Level (CGL) is a national-level exam conducted to recruit candidates for Group 'B' and 'C' posts in various ministries, departments, and organizations of the Government of India.", website: "https://ssc.gov.in/" },
            banking: { name: "Banking", icon: "ðŸ¦", image: "https://www.idfcfirstbank.com/content/dam/idfcfirstbank/images/blog/mobile-banking/how-new-age-banking-is-transforming-the-banking-industry-717x404.jpg", page: "/banking.html",
                description: "Banking exams like IBPS PO, IBPS Clerk, SBI PO, and RBI Assistant are conducted for recruitment to various officer and clerical posts in public sector banks across India.", website: "https://www.ibps.in/" },
            railways: { name: "Railways", icon: "ðŸš‚", image: "https://www.euroschoolindia.com/blogs/wp-content/uploads/2023/10/indian-railway-project.jpg", page: "/railways.html",
                description: "Railway Recruitment Boards (RRBs) conduct exams like RRB NTPC and RRB Group D to recruit a wide range of staff for the Indian Railways, one of the largest employers in the country.", website: "https://indianrailways.gov.in/railwayboard/view_section.jsp?lang=0&id=0,4,1244" },
            other: { name: "Other", icon: "ðŸ“š", image: "https://images.unsplash.com/photo-1454165804606-c3d57bc86b40?q=80&w=2070", page: "#" }
        };

        function updateDashboard(examKey) {
            const card = document.querySelector('.thumbnail-card');
            const exam = examData[examKey];
            if (!exam) return;

            // 1. Add class to start fade-out animation
            card.classList.add('updating');

            // 2. Wait for the fade-out to be visible, then update content and fade back in
            setTimeout(() => {
                document.getElementById('examName').textContent = exam.name;
                document.getElementById('examImage').src = exam.image;
                document.getElementById('startLearningBtn').href = exam.page;
                document.getElementById('description-text').textContent = exam.description || "Select an exam from the menu to see a brief description here.";

                // Handle the website link
                const websiteBox = document.getElementById('website-box');
                if (exam.website) {
                    websiteBox.innerHTML = `<div class="website-link-box"><a href="${exam.website}" target="_blank" rel="noopener noreferrer">Website Link</a></div>`;
                    websiteBox.style.display = 'block';
                } else {
                    websiteBox.style.display = 'none';
                    websiteBox.innerHTML = '';
                }
                // 3. Remove class to trigger fade-in animation
                card.classList.remove('updating');
            }, 200); // This delay should match the transition duration
        }
        
        const menuOverlay = document.getElementById('menuOverlay');
        menuOverlay.style.display = 'none'; // Initially hidden
        menuOverlay.style.position = 'fixed';
        menuOverlay.style.inset = '0';

        function toggleSideMenu() {
            document.getElementById('examMenu').classList.toggle('open');
            document.body.classList.toggle('menu-open');
            menuOverlay.style.display = document.body.classList.contains('menu-open') ? 'block' : 'none';
        }

        function selectExam(examKey) {
            // Update the main dashboard content
            updateDashboard(examKey);

            // Update the active state in the side menu
            document.querySelectorAll('#examList a').forEach(link => {
                link.classList.remove('active');
            });
            document.querySelector(`#examList a[data-exam="${examKey}"]`).classList.add('active');

            // Save the selected exam to local storage for persistence
            safeStorage.setItem('userExamChoice', examKey);

            // Always hide menu on selection
            toggleSideMenu();
        }

        function logout() {
            safeStorage.removeItem('sessionToken');
            // Redirect to login page
            window.location.replace('/login.html');
        }

        function populateExamMenu(currentExam) {
            const examList = document.getElementById('examList');
            examList.innerHTML = ''; // Clear existing items

            for (const key in examData) {
                const exam = examData[key];
                const listItem = document.createElement('li');
                const link = document.createElement('a');                link.href = '#';
                link.innerHTML = `<span class="icon">${exam.icon || 'ðŸ“„'}</span> ${exam.name}`;                link.dataset.exam = key;
                if (key === currentExam) {                    link.classList.add('active');
                }                link.onclick = (e) => {
                    e.preventDefault();
                    selectExam(key);
                };
                listItem.appendChild(link); // This was incorrect, it should be listItem.appendChild(link)
                examList.appendChild(listItem);
            }
        }

        // --- Search Functionality ---
        const searchPopup = document.getElementById('searchPopup');
        const searchInput = document.getElementById('searchInput');
        const searchResults = document.getElementById('searchResults');

        function openSearch() {
            searchPopup.classList.add('show');
            searchInput.focus();
        }

        function handleSearchClick(event) {
            // Prevent search popup from opening if the voice button was clicked
            if (event.target.closest('.voice-search-btn')) return;
            openSearch();
        }
        function startVoiceSearch() {
            const voiceSearchBtn = document.querySelector('.voice-search-btn');
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

            if (!SpeechRecognition) {
                alert('Sorry, your browser does not support voice search.');
                return;
            }

            const recognition = new SpeechRecognition();
            recognition.lang = 'en-IN'; // Set language to Indian English
            recognition.interimResults = false;
            recognition.maxAlternatives = 1;

            recognition.onstart = () => {
                voiceSearchBtn.classList.add('listening');
            };

            recognition.onspeechend = () => {
                recognition.stop();
                voiceSearchBtn.classList.remove('listening');
            };

            recognition.onresult = (event) => {
                const speechResult = event.results[0][0].transcript;
                openSearch(); // Open the search popup
                searchInput.value = speechResult;
                // Trigger the input event to filter results
                searchInput.dispatchEvent(new Event('input'));
            };

            recognition.start();
        }

        function closeSearch() {
            searchPopup.classList.remove('show');
            searchInput.value = '';
            searchResults.innerHTML = '';
        }

        function buildSearchIndex() {
            // Add main exam pages
            for (const key in examData) {
                if (examData[key].page !== '#') {
                    searchableContent.push({ name: examData[key].name, link: examData[key].page });
                }
            }
            // Manually add video folder pages
            searchableContent.push({ name: 'UPSC Video Lectures', link: '/upsc-videos.html' });
            searchableContent.push({ name: 'UPSC History Videos', link: '/upsc-history-videos.html' });
            searchableContent.push({ name: 'UPSC Geography Videos', link: '/upsc-geography-videos.html' });
            searchableContent.push({ name: 'UPSC Polity Videos', link: '/upsc-polity-videos.html' });
            searchableContent.push({ name: 'UPSC Economy Videos', link: '/upsc-economy-videos.html' });
            searchableContent.push({ name: 'UPSC World History Videos', link: '/upsc-world-history-videos.html' });
            searchableContent.push({ name: 'UPSC International Relations Videos', link: '/upsc-ir-videos.html' });
            searchableContent.push({ name: 'UPSC Biology Videos', link: '/upsc-biology-videos.html' });
            searchableContent.push({ name: 'UPSC Maps Videos', link: '/upsc-maps-videos.html' });
            searchableContent.push({ name: 'UPSC Art & Culture Videos', link: '/upsc-art-culture-videos.html' });
            searchableContent.push({ name: 'UPSC Post Independence Videos', link: '/upsc-post-independence-videos.html' });
            
            searchableContent.push({ name: 'SSC-CGL Video Lectures', link: '/ssc-cgl-videos.html' });
            searchableContent.push({ name: 'SSC-CGL Quant Videos', link: '/ssc-cgl-quant-videos.html' });

            searchableContent.push({ name: 'CDS Video Lectures', link: '/cds-videos.html' });
            searchableContent.push({ name: 'NDA Video Lectures', link: '/nda-videos.html' });
            searchableContent.push({ name: 'Railways Video Lectures', link: '/railways-videos.html' });
            searchableContent.push({ name: 'Banking Video Lectures', link: '/banking-videos.html' });

            // Add individual lectures
            const ssc_cgl_quant_videos = [ { id: "anhbMmxLSiU", title: "Day 1 | 75 Days Maths Hard Challenge" }, { id: "13lhhdfulYk", title: "Day 2 | 75 Days Maths Hard Challenge" }, { id: "uIgfE1yWHMs", title: "Day 3 | 75 Days Maths Hard Challenge" }, { id: "HvwaRsvUwQI", title: "Day 4 | 75 Days Maths Hard Challenge" }, { id: "KNJntHXUrOA", title: "Day 5 | 75 Days Maths Hard Challenge" }, { id: "m5mKtzU7T9I", title: "Day 6 | 75 Days Maths Hard Challenge" }, { id: "kFsw5NbaN5s", title: "Day 7 | 75 Days Maths Hard Challenge" }, { id: "qbNzR6eLdXQ", title: "Day 8 | 75 Days Maths Hard Challenge" }, { id: "m0GZ1TiJIX4", title: "Day 9 | 75 Days Maths Hard Challenge" }, { id: "iS1suoSyuTg", title: "Day 10 | 75 Days Maths Hard Challenge" }, { id: "GoaN-Lp2GvY", title: "Day 11 | 75 Days Maths Hard Challenge" }, { id: "uTkx2WSf5Sg", title: "Day 12 | 75 Days Maths Hard Challenge" }, { id: "1uFbJWf8M28", title: "Day 13 | 75 Days Maths Hard Challenge" }, { id: "NyXzvPDyCyY", title: "Day 14 | 75 Days Maths Hard Challenge" }, { id: "n_Lln6kNSN8", title: "Day 15 | 75 Days Maths Hard Challenge" }, { id: "_ahnSXEjHPU", title: "Day 16 | 75 Days Maths Hard Challenge" }, { id: "4vqHnuid4hQ", title: "Day 17 | 75 Days Maths Hard Challenge" }, { id: "n_Lln6kNSN8", title: "Day 18 | 75 Days Maths Hard Challenge" }, { id: "_ahnSXEjHPU", title: "Day 19 | 75 Days Maths Hard Challenge" }, { id: "4vqHnuid4hQ", title: "Day 20 | 75 Days Maths Hard Challenge" }, { id: "s_t_u_v_w_x", title: "Day 21 | 75 Days Maths Hard Challenge" }, { id: "y_z_A_B_C_D", title: "Day 22 | 75 Days Maths Hard Challenge" }, { id: "E_F_G_H_I_J", title: "Day 23 | 75 Days Maths Hard Challenge" }, { id: "K_L_M_N_O_P", title: "Day 24 | 75 Days Maths Hard Challenge" }, { id: "Q_R_S_T_U_V", title: "Day 25 | 75 Days Maths Hard Challenge" }, { id: "W_X_Y_Z_1_2", title: "Day 26 | 75 Days Maths Hard Challenge" }, { id: "3_4_5_6_7_8", title: "Day 27 | 75 Days Maths Hard Challenge" }, { id: "9_0_A_B_C_D", title: "Day 28 | 75 Days Maths Hard Challenge" }, { id: "E_F_G_H_I_J", title: "Day 29 | 75 Days Maths Hard Challenge" }, { id: "K_L_M_N_O_P", title: "Day 30 | 75 Days Maths Hard Challenge" }, { id: "Q_R_S_T_U_V", title: "Day 31 | 75 Days Maths Hard Challenge" }, { id: "W_X_Y_Z_1_2", title: "Day 32 | 75 Days Maths Hard Challenge" }, { id: "3_4_5_6_7_8", title: "Day 33 | 75 Days Maths Hard Challenge" }, { id: "9_0_A_B_C_D", title: "Day 34 | 75 Days Maths Hard Challenge" }, { id: "E_F_G_H_I_J", title: "Day 35 | 75 Days Maths Hard Challenge" }, { id: "K_L_M_N_O_P", title: "Day 36 | 75 Days Maths Hard Challenge" }, { id: "Q_R_S_T_U_V", title: "Day 37 | 75 Days Maths Hard Challenge" }, { id: "W_X_Y_Z_1_2", title: "Day 38 | 75 Days Maths Hard Challenge" }, { id: "3_4_5_6_7_8", title: "Day 39 | 75 Days Maths Hard Challenge" }, { id: "9_0_A_B_C_D", title: "Day 40 | 75 Days Maths Hard Challenge" }, { id: "E_F_G_H_I_J", title: "Day 41 | 75 Days Maths Hard Challenge" }, { id: "K_L_M_N_O_P", title: "Day 42 | 75 Days Maths Hard Challenge" }, { id: "Q_R_S_T_U_V", title: "Day 43 | 75 Days Maths Hard Challenge" }, { id: "W_X_Y_Z_1_2", title: "Day 44 | 75 Days Maths Hard Challenge" }, { id: "3_4_5_6_7_8", title: "Day 45 | 75 Days Maths Hard Challenge" }, { id: "9_0_A_B_C_D", title: "Day 46 | 75 Days Maths Hard Challenge" }, { id: "E_F_G_H_I_J", title: "Day 47 | 75 Days Maths Hard Challenge" }, { id: "K_L_M_N_O_P", title: "Day 48 | 75 Days Maths Hard Challenge" }, { id: "Q_R_S_T_U_V", title: "Day 49 | 75 Days Maths Hard Challenge" }, { id: "W_X_Y_Z_1_2", title: "Day 50 | 75 Days Maths Hard Challenge" }, { id: "3_4_5_6_7_8", title: "Day 51 | 75 Days Maths Hard Challenge" }, { id: "9_0_A_B_C_D", title: "Day 52 | 75 Days Maths Hard Challenge" }, { id: "E_F_G_H_I_J", title: "Day 53 | 75 Days Maths Hard Challenge" }, { id: "K_L_M_N_O_P", title: "Day 54 | 75 Days Maths Hard Challenge" }, { id: "Q_R_S_T_U_V", title: "Day 55 | 75 Days Maths Hard Challenge" }, { id: "W_X_Y_Z_1_2", title: "Day 56 | 75 Days Maths Hard Challenge" }, { id: "3_4_5_6_7_8", title: "Day 57 | 75 Days Maths Hard Challenge" }, { id: "9_0_A_B_C_D", title: "Day 58 | 75 Days Maths Hard Challenge" }, { id: "E_F_G_H_I_J", title: "Day 59 | 75 Days Maths Hard Challenge" }, { id: "K_L_M_N_O_P", title: "Day 60 | 75 Days Maths Hard Challenge" }, { id: "Q_R_S_T_U_V", title: "Day 61 | 75 Days Maths Hard Challenge" }, { id: "W_X_Y_Z_1_2", title: "Day 62 | 75 Days Maths Hard Challenge" }, { id: "3_4_5_6_7_8", title: "Day 63 | 75 Days Maths Hard Challenge" }, { id: "9_0_A_B_C_D", title: "Day 64 | 75 Days Maths Hard Challenge" }, { id: "E_F_G_H_I_J", title: "Day 65 | 75 Days Maths Hard Challenge" }, { id: "K_L_M_N_O_P", title: "Day 66 | 75 Days Maths Hard Challenge" }, { id: "Q_R_S_T_U_V", title: "Day 67 | 75 Days Maths Hard Challenge" }, { id: "W_X_Y_Z_1_2", title: "Day 68 | 75 Days Maths Hard Challenge" }, { id: "3_4_5_6_7_8", title: "Day 69 | 75 Days Maths Hard Challenge" }, { id: "9_0_A_B_C_D", title: "Day 70 | 75 Days Maths Hard Challenge" }, { id: "E_F_G_H_I_J", title: "Day 71 | 75 Days Maths Hard Challenge" }, { id: "K_L_M_N_O_P", title: "Day 72 | 75 Days Maths Hard Challenge" }, { id: "Q_R_S_T_U_V", title: "Day 73 | 75 Days Maths Hard Challenge" }, { id: "W_X_Y_Z_1_2", title: "Day 74 | 75 Days Maths Hard Challenge" }, { id: "3_4_5_6_7_8", title: "Day 75 | 75 Days Maths Hard Challenge" } ];
            ssc_cgl_quant_videos.forEach(video => searchableContent.push({ name: `SSC CGL Quant: ${video.title}`, link: `/ssc-cgl-quant-videos.html` }));

            const upsc_history_videos = Array.from({ length: 47 }, (_, i) => ({ title: `History Lecture ${i + 1}` }));
            upsc_history_videos.forEach(video => searchableContent.push({ name: `UPSC: ${video.title}`, link: `/upsc-history-videos.html` }));

            const upsc_geography_videos = Array.from({ length: 39 }, (_, i) => ({ title: `Geography Lecture ${i + 1}` }));
            upsc_geography_videos.forEach(video => searchableContent.push({ name: `UPSC: ${video.title}`, link: `/upsc-geography-videos.html` }));

            const upsc_polity_videos = Array.from({ length: 41 }, (_, i) => ({ title: `Polity Lecture ${i + 1}` }));
            upsc_polity_videos.forEach(video => searchableContent.push({ name: `UPSC: ${video.title}`, link: `/upsc-polity-videos.html` }));

            const upsc_economy_videos = Array.from({ length: 55 }, (_, i) => ({ title: `Economy Lecture ${i + 1}` }));
            upsc_economy_videos.forEach(video => searchableContent.push({ name: `UPSC: ${video.title}`, link: `/upsc-economy-videos.html` }));

            const upsc_world_history_videos = Array.from({ length: 14 }, (_, i) => ({ title: `World History Lecture ${i + 1}` }));
            upsc_world_history_videos.forEach(video => searchableContent.push({ name: `UPSC: ${video.title}`, link: `/upsc-world-history-videos.html` }));

            const upsc_ir_videos = Array.from({ length: 23 }, (_, i) => ({ title: `IR Lecture ${i + 1}` }));
            upsc_ir_videos.forEach(video => searchableContent.push({ name: `UPSC: ${video.title}`, link: `/upsc-ir-videos.html` }));

            const upsc_biology_videos = Array.from({ length: 7 }, (_, i) => ({ title: `Biology Lecture ${i + 1}` }));
            upsc_biology_videos.forEach(video => searchableContent.push({ name: `UPSC: ${video.title}`, link: `/upsc-biology-videos.html` }));

            const upsc_maps_videos = Array.from({ length: 9 }, (_, i) => ({ title: `Maps Lecture ${i + 1}` }));
            upsc_maps_videos.forEach(video => searchableContent.push({ name: `UPSC: ${video.title}`, link: `/upsc-maps-videos.html` }));

            const upsc_art_culture_videos = Array.from({ length: 18 }, (_, i) => ({ title: `Art & Culture Lecture ${i + 1}` }));
            upsc_art_culture_videos.forEach(video => searchableContent.push({ name: `UPSC: ${video.title}`, link: `/upsc-art-culture-videos.html` }));

            const upsc_post_independence_videos = Array.from({ length: 6 }, (_, i) => ({ title: `Post Independence Lecture ${i + 1}` }));
            upsc_post_independence_videos.forEach(video => searchableContent.push({ name: `UPSC: ${video.title}`, link: `/upsc-post-independence-videos.html` }));

            // Add main resource pages
            searchableContent.push({ name: 'UPSC Books', link: '/upsc-books.html' });
            searchableContent.push({ name: 'UPSC Previous Year Papers', link: '/upsc-papers.html' });
            searchableContent.push({ name: 'CDS Books', link: '/cds-books.html' });
            searchableContent.push({ name: 'CDS Previous Year Papers', link: '/cds-papers.html' });
            searchableContent.push({ name: 'NDA Books', link: '/nda-books.html' });
            searchableContent.push({ name: 'NDA Previous Year Papers', link: '/nda-papers.html' });
            searchableContent.push({ name: 'SSC-CGL Books', link: '/ssc-cgl-books.html' });
            searchableContent.push({ name: 'SSC-CGL Previous Year Papers', link: '/ssc-cgl-papers.html' });
            searchableContent.push({ name: 'Railways Books', link: '/railways-books.html' });
            searchableContent.push({ name: 'Railways Previous Year Papers', link: '/railways-papers.html' });
            searchableContent.push({ name: 'Banking Books', link: '/banking-books.html' });
            searchableContent.push({ name: 'Banking Previous Year Papers', link: '/banking-papers.html' });
        }

        searchInput.addEventListener('input', (e) => {
            const query = e.target.value.toLowerCase();
            searchResults.innerHTML = '';
            if (query.length < 2) return;

            const filtered = searchableContent.filter(item => item.name.toLowerCase().includes(query));

            if (filtered.length > 0) {
                filtered.forEach(item => {
                    const a = document.createElement('a');
                    a.href = item.link;
                    // Highlight the matched text
                    const regex = new RegExp(`(${query})`, 'gi');
                    const highlightedName = item.name.replace(regex, '<strong>$1</strong>');
                    a.innerHTML = highlightedName;
                    searchResults.appendChild(a);
                });
            } else {
                const noResultsDiv = document.createElement('div');
                noResultsDiv.className = 'no-results';
                noResultsDiv.textContent = 'No results found. Try a different search term.';
                searchResults.appendChild(noResultsDiv);
            }
        });

        searchInput.addEventListener('keydown', (e) => {
            const results = searchResults.getElementsByTagName('a');
            if (results.length === 0) return;

            let activeIndex = -1;
            for (let i = 0; i < results.length; i++) {
                if (results[i].classList.contains('active')) {
                    activeIndex = i;
                    break;
                }
            }

            if (e.key === 'ArrowDown') {
                e.preventDefault();
                if (activeIndex !== -1) {
                    results[activeIndex].classList.remove('active');
                }
                activeIndex = (activeIndex + 1) % results.length;
                results[activeIndex].classList.add('active');
                results[activeIndex].scrollIntoView({ block: 'nearest' });
            } else if (e.key === 'ArrowUp') {
                e.preventDefault();
                if (activeIndex !== -1) {
                    results[activeIndex].classList.remove('active');
                }
                activeIndex = (activeIndex - 1 + results.length) % results.length;
                results[activeIndex].classList.add('active');
                results[activeIndex].scrollIntoView({ block: 'nearest' });
            } else if (e.key === 'Enter') {
                if (activeIndex !== -1) {
                    results[activeIndex].click();
                }
            }
        });

        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && searchPopup.classList.contains('show')) closeSearch();
        });

        // Close search popup when clicking on the background
        searchPopup.addEventListener('click', (e) => {
            if (e.target === searchPopup) { // Only close if the click is on the background itself
                closeSearch();
            }
        });

        // On page load, check for a saved choice and update the dashboard
        document.addEventListener('DOMContentLoaded', () => {
            // Check for an exam in the URL, otherwise default to 'upsc'
            const urlParams = new URLSearchParams(window.location.search);
            const examFromUrl = urlParams.get('exam') || safeStorage.getItem('userExamChoice');
            const userExam = examData[examFromUrl] ? examFromUrl : 'upsc'; // Default to upsc if nothing is set

            // Populate menu and update dashboard with the determined exam
            populateExamMenu(userExam);
            updateDashboard(userExam);

            // Build the search index
            buildSearchIndex();

            // Display user's name
            const userName = safeStorage.getItem('userName');
            if (userName) {
                document.getElementById('userName').textContent = `Hi, ${userName}`;
            }

        });

        // --- Back to Top Button Logic ---
        const backToTopBtn = document.getElementById('backToTopBtn');

        window.onscroll = function() {
            if (document.body.scrollTop > 100 || document.documentElement.scrollTop > 100) {
                backToTopBtn.style.display = "block";
            } else {
                backToTopBtn.style.display = "none";
            }
        };

        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

    </script>

</body>
</html>
</body>
</html>